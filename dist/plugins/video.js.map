{"version":3,"file":"video.js","sources":["../../src/plugins/video/constants.js","../../src/plugins/video/PauseOverlay.js","../../src/plugins/video/PlayPauseButton.js","../../src/plugins/video/utils.js","../../src/plugins/video/ProgressBar.js","../../src/plugins/video/TimeCaption.js","../../src/plugins/video/VolumeButton.js","../../src/plugins/video/index.js"],"sourcesContent":["export const EVENTS = {\n  /**\n   * @event play\n   * @memberof PSV.plugins.VideoPlugin\n   * @summary Triggered when the video starts playing\n   */\n  PLAY         : 'play',\n  /**\n   * @event pause\n   * @memberof PSV.plugins.VideoPlugin\n   * @summary Triggered when the video is paused\n   */\n  PAUSE        : 'pause',\n  /**\n   * @event volume-change\n   * @memberof PSV.plugins.VideoPlugin\n   * @summary Triggered when the video volume changes\n   * @param {number} volume\n   */\n  VOLUME_CHANGE: 'volume-change',\n  /**\n   * @event progress\n   * @memberof PSV.plugins.VideoPlugin\n   * @summary Triggered when the video play progression changes\n   * @param {{time: number, duration: number, progress: number}} data\n   */\n  PROGRESS     : 'progress',\n  /**\n   * @event buffer\n   * @memberof PSV.plugins.VideoPlugin\n   * @summary Triggered when the video buffer changes\n   * @param {number} maxBuffer\n   */\n  BUFFER       : 'buffer',\n};\n","import { AbstractComponent, CONSTANTS, utils } from '../..';\nimport { EVENTS } from './constants';\nimport playIcon from './play.svg';\n\n/**\n * @private\n */\nexport class PauseOverlay extends AbstractComponent {\n\n  constructor(plugin) {\n    super(plugin.psv, 'psv-video-overlay');\n\n    /**\n     * @type {PSV.plugins.VideoPlugin}\n     * @private\n     * @readonly\n     */\n    this.plugin = plugin;\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.button = document.createElement('button');\n    this.button.className = 'psv-video-bigbutton psv--capture-event';\n    this.button.innerHTML = playIcon;\n    this.container.appendChild(this.button);\n\n    this.psv.on(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n    this.plugin.on(EVENTS.PLAY, this);\n    this.plugin.on(EVENTS.PAUSE, this);\n    this.button.addEventListener('click', this);\n  }\n\n  /**\n   * @private\n   */\n  destroy() {\n    this.psv.off(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n    this.plugin.off(EVENTS.PLAY, this);\n    this.plugin.off(EVENTS.PAUSE, this);\n\n    delete this.plugin;\n\n    super.destroy();\n  }\n\n  /**\n   * @summary Handles events\n   * @param {Event} e\n   * @private\n   */\n  handleEvent(e) {\n    /* eslint-disable */\n    switch (e.type) {\n      case CONSTANTS.EVENTS.PANORAMA_LOADED:\n      case EVENTS.PLAY:\n      case EVENTS.PAUSE:\n        utils.toggleClass(this.button, 'psv-video-bigbutton--pause', !this.plugin.isPlaying());\n        break;\n      case 'click':\n        this.plugin.playPause();\n        break;\n    }\n    /* eslint-enable */\n  }\n\n}\n","import { AbstractButton } from '../..';\nimport { EVENTS } from './constants';\nimport pauseIcon from './pause.svg';\nimport playIcon from './play.svg';\n\n/**\n * @summary Navigation bar video play/pause button\n * @extends PSV.buttons.AbstractButton\n * @memberof PSV.buttons\n */\nexport class PlayPauseButton extends AbstractButton {\n\n  static id = 'videoPlay';\n  static groupId = 'video';\n  static icon = playIcon;\n  static iconActive = pauseIcon;\n\n  /**\n   * @param {PSV.components.Navbar} navbar\n   */\n  constructor(navbar) {\n    super(navbar, 'psv-button--hover-scale psv-video-play-button', true);\n\n    /**\n     * @type {PSV.plugins.VideoPlugin}\n     * @private\n     * @readonly\n     */\n    this.plugin = this.psv.getPlugin('video');\n\n    if (this.plugin) {\n      this.plugin.on(EVENTS.PLAY, this);\n      this.plugin.on(EVENTS.PAUSE, this);\n    }\n  }\n\n  /**\n   * @override\n   */\n  destroy() {\n    if (this.plugin) {\n      this.plugin.off(EVENTS.PLAY, this);\n      this.plugin.off(EVENTS.PAUSE, this);\n    }\n\n    delete this.plugin;\n\n    super.destroy();\n  }\n\n  /**\n   * @override\n   */\n  isSupported() {\n    return !!this.plugin;\n  }\n\n  /**\n   * @summary Handles events\n   * @param {Event} e\n   * @private\n   */\n  handleEvent(e) {\n    /* eslint-disable */\n    switch (e.type) {\n      case EVENTS.PLAY:\n      case EVENTS.PAUSE:\n        this.toggleActive(this.plugin.isPlaying());\n        break;\n    }\n    /* eslint-enable */\n  }\n\n  /**\n   * @override\n   * @description Toggles video playback\n   */\n  onClick() {\n    this.plugin.playPause();\n  }\n\n}\n","/**\n * @private\n */\nexport function formatTime(time) {\n  const seconds = Math.round(time % 60);\n  const minutes = Math.round(time - seconds) / 60;\n  return `${minutes}:${('0' + seconds).slice(-2)}`;\n}\n","import { AbstractComponent, CONSTANTS, utils } from '../..';\nimport { EVENTS } from './constants';\nimport { formatTime } from './utils';\n\n/**\n * @private\n */\nexport class ProgressBar extends AbstractComponent {\n\n  constructor(plugin) {\n    super(plugin.psv, 'psv-video-progressbar');\n\n    /**\n     * @type {PSV.plugins.VideoPlugin}\n     * @private\n     * @readonly\n     */\n    this.plugin = plugin;\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.bufferElt = document.createElement('div');\n    this.bufferElt.className = 'psv-video-progressbar__buffer';\n    this.container.appendChild(this.bufferElt);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.progressElt = document.createElement('div');\n    this.progressElt.className = 'psv-video-progressbar__progress';\n    this.container.appendChild(this.progressElt);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.handleElt = document.createElement('div');\n    this.handleElt.className = 'psv-video-progressbar__handle';\n    this.container.appendChild(this.handleElt);\n\n    /**\n     * @type {PSV.utils.Slider}\n     * @private\n     * @readonly\n     */\n    this.slider = new utils.Slider({\n      psv      : this.psv,\n      container: this.container,\n      direction: utils.Slider.HORIZONTAL,\n      onUpdate : e => this.__onSliderUpdate(e),\n    });\n\n    this.psv.on(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n    this.plugin.on(EVENTS.BUFFER, this);\n    this.plugin.on(EVENTS.PROGRESS, this);\n\n    this.prop.req = window.requestAnimationFrame(() => this.__updateProgress());\n\n    this.hide();\n  }\n\n  /**\n   * @override\n   */\n  destroy() {\n    this.psv.off(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n    this.plugin.off(EVENTS.BUFFER, this);\n    this.plugin.off(EVENTS.PROGRESS, this);\n\n    this.slider.destroy();\n    this.prop.tooltip?.hide();\n    window.cancelAnimationFrame(this.prop.req);\n\n    delete this.prop.tooltip;\n    delete this.slider;\n    delete this.plugin;\n\n    super.destroy();\n  }\n\n  /**\n   * @private\n   */\n  handleEvent(e) {\n    /* eslint-disable */\n    switch (e.type) {\n      case CONSTANTS.EVENTS.PANORAMA_LOADED:\n      case EVENTS.BUFFER:\n      case EVENTS.PROGRESS:\n        this.bufferElt.style.width = `${this.plugin.getBufferProgress() * 100}%`;\n        break;\n    }\n    /* eslint-enable */\n  }\n\n  /**\n   * @private\n   */\n  __updateProgress() {\n    this.progressElt.style.width = `${this.plugin.getProgress() * 100}%`;\n\n    this.prop.req = window.requestAnimationFrame(() => this.__updateProgress());\n  }\n\n  /**\n   * @private\n   */\n  __onSliderUpdate(e) {\n    if (e.mouseover) {\n      this.handleElt.style.display = 'block';\n      this.handleElt.style.left = `${e.value * 100}%`;\n\n      const time = formatTime(this.plugin.getDuration() * e.value);\n\n      if (!this.prop.tooltip) {\n        this.prop.tooltip = this.psv.tooltip.create({\n          top    : e.cursor.clientY,\n          left   : e.cursor.clientX,\n          content: time,\n        });\n      }\n      else {\n        this.prop.tooltip.content.innerHTML = time;\n        this.prop.tooltip.move({\n          top : e.cursor.clientY,\n          left: e.cursor.clientX,\n        });\n      }\n    }\n    else {\n      this.handleElt.style.display = 'none';\n\n      this.prop.tooltip?.hide();\n      delete this.prop.tooltip;\n    }\n    if (e.click) {\n      this.plugin.setProgress(e.value);\n    }\n  }\n\n}\n","import { AbstractComponent, CONSTANTS } from '../..';\nimport { EVENTS } from './constants';\nimport { formatTime } from './utils';\n\n/**\n * @summary Navigation bar video time display\n * @extends PSV.buttons.AbstractButton\n * @memberof PSV.buttons\n */\nexport class TimeCaption extends AbstractComponent {\n\n  static id = 'videoTime';\n  static groupId = 'video';\n\n  /**\n   * @param {PSV.components.Navbar} navbar\n   */\n  constructor(navbar) {\n    super(navbar, 'psv-caption psv-video-time');\n\n    /**\n     * @member {HTMLElement}\n     * @readonly\n     * @private\n     */\n    this.content = document.createElement('div');\n    this.content.className = 'psv-caption-content';\n    this.container.appendChild(this.content);\n\n    /**\n     * @type {PSV.plugins.VideoPlugin}\n     * @private\n     * @readonly\n     */\n    this.plugin = this.psv.getPlugin('video');\n\n    if (this.plugin) {\n      this.psv.on(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n      this.plugin.on(EVENTS.PROGRESS, this);\n    }\n  }\n\n  /**\n   * @override\n   */\n  destroy() {\n    if (this.plugin) {\n      this.psv.off(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n      this.plugin.off(EVENTS.PROGRESS, this);\n    }\n\n    delete this.plugin;\n\n    super.destroy();\n  }\n\n  /**\n   * @summary Handles events\n   * @param {Event} e\n   * @private\n   */\n  handleEvent(e) {\n    /* eslint-disable */\n    switch (e.type) {\n      case CONSTANTS.EVENTS.PANORAMA_LOADED:\n      case EVENTS.PROGRESS:\n        this.content.innerHTML = `<strong>${formatTime(this.plugin.getTime())}</strong> / ${formatTime(this.plugin.getDuration())}`;\n        break;\n    }\n    /* eslint-enable */\n  }\n\n}\n","import { AbstractButton, CONSTANTS, utils } from '../..';\nimport { EVENTS } from './constants';\nimport volumeIcon from './volume.svg';\n\n/**\n * @summary Navigation bar video volume button\n * @extends PSV.buttons.AbstractButton\n * @memberof PSV.buttons\n */\nexport class VolumeButton extends AbstractButton {\n\n  static id = 'videoVolume';\n  static groupId = 'video';\n  static icon = volumeIcon;\n\n  /**\n   * @param {PSV.components.Navbar} navbar\n   */\n  constructor(navbar) {\n    super(navbar, 'psv-button--hover-scale psv-video-volume-button', true);\n\n    /**\n     * @type {PSV.plugins.VideoPlugin}\n     * @private\n     * @readonly\n     */\n    this.plugin = this.psv.getPlugin('video');\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.rangeContainer = document.createElement('div');\n    this.rangeContainer.className = 'psv-video-volume__container';\n    this.container.appendChild(this.rangeContainer);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.range = document.createElement('div');\n    this.range.className = 'psv-video-volume__range';\n    this.rangeContainer.appendChild(this.range);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.trackElt = document.createElement('div');\n    this.trackElt.className = 'psv-video-volume__track';\n    this.range.appendChild(this.trackElt);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.progressElt = document.createElement('div');\n    this.progressElt.className = 'psv-video-volume__progress';\n    this.range.appendChild(this.progressElt);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     * @readonly\n     */\n    this.handleElt = document.createElement('div');\n    this.handleElt.className = 'psv-video-volume__handle';\n    this.range.appendChild(this.handleElt);\n\n    /**\n     * @type {PSV.utils.Slider}\n     * @private\n     * @readonly\n     */\n    this.slider = new utils.Slider({\n      psv      : this.psv,\n      container: this.range,\n      direction: utils.Slider.VERTICAL,\n      onUpdate : e => this.__onSliderUpdate(e),\n    });\n\n    if (this.plugin) {\n      this.psv.on(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n      this.plugin.on(EVENTS.PLAY, this);\n      this.plugin.on(EVENTS.VOLUME_CHANGE, this);\n\n      this.__setVolume(0);\n    }\n  }\n\n  /**\n   * @override\n   */\n  destroy() {\n    if (this.plugin) {\n      this.psv.off(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n      this.plugin.off(EVENTS.PLAY, this);\n      this.plugin.off(EVENTS.VOLUME_CHANGE, this);\n    }\n\n    this.slider.destroy();\n\n    delete this.plugin;\n\n    super.destroy();\n  }\n\n  /**\n   * @override\n   */\n  isSupported() {\n    return !!this.plugin;\n  }\n\n  /**\n   * @summary Handles events\n   * @param {Event} e\n   * @private\n   */\n  handleEvent(e) {\n    /* eslint-disable */\n    switch (e.type) {\n      case CONSTANTS.EVENTS.PANORAMA_LOADED:\n      case EVENTS.PLAY:\n      case EVENTS.VOLUME_CHANGE:\n        this.__setVolume(this.plugin.getVolume());\n        break;\n    }\n    /* eslint-enable */\n  }\n\n  /**\n   * @override\n   * @description Toggles video muted\n   */\n  onClick() {\n    this.plugin.setMute();\n  }\n\n  /**\n   * @private\n   */\n  __onSliderUpdate(e) {\n    if (e.mousedown) {\n      this.plugin.setVolume(e.value);\n    }\n  }\n\n  /**\n   * @private\n   */\n  __setVolume(volume) {\n    let level;\n    if (volume === 0) level = 0;\n    else if (volume < 0.333) level = 1;\n    else if (volume < 0.666) level = 2;\n    else level = 3;\n\n    utils.toggleClass(this.container, 'psv-video-volume-button--0', level === 0);\n    utils.toggleClass(this.container, 'psv-video-volume-button--1', level === 1);\n    utils.toggleClass(this.container, 'psv-video-volume-button--2', level === 2);\n    utils.toggleClass(this.container, 'psv-video-volume-button--3', level === 3);\n\n    this.handleElt.style.bottom = `${volume * 100}%`;\n    this.progressElt.style.height = `${volume * 100}%`;\n  }\n\n}\n","import { SplineCurve, Vector2 } from 'three';\nimport { AbstractPlugin, CONSTANTS, DEFAULTS, PSVError, registerButton, utils } from '../..';\nimport { EVENTS } from './constants';\nimport { PauseOverlay } from './PauseOverlay';\nimport { PlayPauseButton } from './PlayPauseButton';\nimport { ProgressBar } from './ProgressBar';\nimport { TimeCaption } from './TimeCaption';\nimport { VolumeButton } from './VolumeButton';\nimport './style.scss';\n\n\n/**\n * @typedef {Object} PSV.plugins.VideoPlugin.Keypoint\n * @property {PSV.ExtendedPosition} position\n * @property {number} time\n */\n\n/**\n * @typedef {Object} PSV.plugins.VideoPlugin.Options\n * @property {boolean} [progressbar=true] - displays a progressbar on top of the navbar\n * @property {boolean} [bigbutton=true] - displays a big \"play\" button in the center of the viewer\n * @property {PSV.plugins.VideoPlugin.Keypoint[]} [keypoints] - defines autorotate timed keypoints\n */\n\n\n// add video buttons\nDEFAULTS.lang[PlayPauseButton.id] = 'Play/Pause';\nDEFAULTS.lang[VolumeButton.id] = 'Volume';\nregisterButton(PlayPauseButton);\nregisterButton(VolumeButton);\nregisterButton(TimeCaption);\nDEFAULTS.navbar.unshift(PlayPauseButton.groupId);\n\n\nexport { EVENTS } from './constants';\n\n\n/**\n * @summary Controls a video adapter\n * @extends PSV.plugins.AbstractPlugin\n * @memberof PSV.plugins\n */\nexport class VideoPlugin extends AbstractPlugin {\n\n  static id = 'video';\n\n  static EVENTS = EVENTS;\n\n  /**\n   * @param {PSV.Viewer} psv\n   * @param {PSV.plugins.VideoPlugin.Options} options\n   */\n  constructor(psv, options) {\n    super(psv);\n\n    if (!this.psv.adapter.constructor.id.includes('video')) {\n      throw new PSVError('VideoPlugin can only be used with a video adapter.');\n    }\n\n    /**\n     * @member {Object}\n     * @property {THREE.SplineCurve} curve\n     * @property {PSV.plugins.VideoPlugin.Keypoint} start\n     * @property {PSV.plugins.VideoPlugin.Keypoint} end\n     * @property {PSV.plugins.VideoPlugin.Keypoint[]} keypoints\n     * @private\n     */\n    this.autorotate = {\n      curve    : null,\n      start    : null,\n      end      : null,\n      keypoints: null,\n    };\n\n    /**\n     * @member {PSV.plugins.VideoPlugin.Options}\n     * @private\n     */\n    this.config = {\n      progressbar: true,\n      bigbutton  : true,\n      ...options,\n    };\n\n    if (this.config.progressbar) {\n      this.progressbar = new ProgressBar(this);\n    }\n\n    if (this.config.bigbutton) {\n      this.overlay = new PauseOverlay(this);\n    }\n\n    /**\n     * @type {PSV.plugins.MarkersPlugin}\n     * @private\n     */\n    this.markers = null;\n  }\n\n  /**\n   * @package\n   */\n  init() {\n    super.init();\n\n    this.markers = this.psv.getPlugin('markers');\n\n    if (this.config.keypoints) {\n      this.setKeypoints(this.config.keypoints);\n      delete this.config.keypoints;\n    }\n\n    this.psv.on(CONSTANTS.EVENTS.AUTOROTATE, this);\n    this.psv.on(CONSTANTS.EVENTS.BEFORE_RENDER, this);\n    this.psv.on(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n    this.psv.on(CONSTANTS.EVENTS.KEY_PRESS, this);\n  }\n\n  /**\n   * @package\n   */\n  destroy() {\n    this.psv.off(CONSTANTS.EVENTS.AUTOROTATE, this);\n    this.psv.off(CONSTANTS.EVENTS.BEFORE_RENDER, this);\n    this.psv.off(CONSTANTS.EVENTS.PANORAMA_LOADED, this);\n    this.psv.off(CONSTANTS.EVENTS.KEY_PRESS, this);\n\n    delete this.autorotate;\n    delete this.progressbar;\n    delete this.overlay;\n\n    super.destroy();\n  }\n\n  /**\n   * @private\n   */\n  handleEvent(e) {\n    /* eslint-disable */\n    // @formatter:off\n    switch (e.type) {\n      case CONSTANTS.EVENTS.BEFORE_RENDER:\n        this.__autorotate();\n        break;\n      case CONSTANTS.EVENTS.AUTOROTATE:\n        this.__configureAutorotate();\n        break;\n      case CONSTANTS.EVENTS.PANORAMA_LOADED:\n        this.__bindVideo(e.args[0]);\n        this.progressbar?.show();\n        break;\n      case CONSTANTS.EVENTS.KEY_PRESS:\n        this.__onKeyPress(e, e.args[0]);\n        break;\n      case 'play':         this.trigger(EVENTS.PLAY); break;\n      case 'pause':        this.trigger(EVENTS.PAUSE); break;\n      case 'progress':     this.trigger(EVENTS.BUFFER, this.getBufferProgress()); break;\n      case 'volumechange': this.trigger(EVENTS.VOLUME_CHANGE, this.getVolume()); break;\n      case 'timeupdate':\n        this.trigger(EVENTS.PROGRESS, {\n          time    : this.getTime(),\n          duration: this.getDuration(),\n          progress: this.getProgress(),\n        });\n        break;\n    }\n    // @formatter:on\n    /* eslint-enable */\n  }\n\n  /**\n   * @private\n   */\n  __bindVideo(textureData) {\n    this.video = textureData.texture.image;\n\n    this.video.addEventListener('play', this);\n    this.video.addEventListener('pause', this);\n    this.video.addEventListener('progress', this);\n    this.video.addEventListener('volumechange', this);\n    this.video.addEventListener('timeupdate', this);\n  }\n\n  /**\n   * @private\n   */\n  __onKeyPress(e, key) {\n    if (key === CONSTANTS.KEY_CODES.Space) {\n      this.playPause();\n      e.preventDefault();\n    }\n  }\n\n  /**\n   * @summary Returns the durection of the video\n   * @returns {number}\n   */\n  getDuration() {\n    return this.video?.duration ?? 0;\n  }\n\n  /**\n   * @summary Returns the current time of the video\n   * @returns {number}\n   */\n  getTime() {\n    return this.video?.currentTime ?? 0;\n  }\n\n  /**\n   * @summary Returns the play progression of the video\n   * @returns {number} 0-1\n   */\n  getProgress() {\n    return this.video ? this.video.currentTime / this.video.duration : 0;\n  }\n\n  /**\n   * @summary Returns if the video is playing\n   * @returns {boolean}\n   */\n  isPlaying() {\n    return this.video ? !this.video.paused : false;\n  }\n\n  /**\n   * @summary Returns the video volume\n   * @returns {number}\n   */\n  getVolume() {\n    return this.video?.muted ? 0 : this.video?.volume ?? 0;\n  }\n\n  /**\n   * @summary Starts or pause the video\n   */\n  playPause() {\n    if (this.video) {\n      if (this.video.paused) {\n        this.video.play();\n      }\n      else {\n        this.video.pause();\n      }\n    }\n  }\n\n  /**\n   * @summary Starts the video if paused\n   */\n  play() {\n    if (this.video && this.video.paused) {\n      this.video.play();\n    }\n  }\n\n  /**\n   * @summary Pauses the cideo if playing\n   */\n  pause() {\n    if (this.video && !this.video.paused) {\n      this.video.pause();\n    }\n  }\n\n  /**\n   * @summary Sets the volume of the video\n   * @param {number} volume\n   */\n  setVolume(volume) {\n    if (this.video) {\n      this.video.muted = false;\n      this.video.volume = volume;\n    }\n  }\n\n  /**\n   * @summary (Un)mutes the video\n   * @param {boolean} [mute] - toggle if undefined\n   */\n  setMute(mute) {\n    if (this.video) {\n      this.video.muted = mute === undefined ? !this.video.muted : mute;\n      if (!this.video.muted && this.video.volume === 0) {\n        this.video.volume = 0.1;\n      }\n    }\n  }\n\n  /**\n   * @summary Changes the current time of the video\n   * @param {number} time\n   */\n  setTime(time) {\n    if (this.video) {\n      this.video.currentTime = time;\n    }\n  }\n\n  /**\n   * @summary Changes the progression of the video\n   * @param {number} progress 0-1\n   */\n  setProgress(progress) {\n    if (this.video) {\n      this.video.currentTime = this.video.duration * progress;\n    }\n  }\n\n  getBufferProgress() {\n    if (this.video) {\n      let maxBuffer = 0;\n\n      const buffer = this.video.buffered;\n\n      for (let i = 0, l = buffer.length; i < l; i++) {\n        if (buffer.start(i) <= this.video.currentTime && buffer.end(i) >= this.video.currentTime) {\n          maxBuffer = buffer.end(i);\n          break;\n        }\n      }\n\n      return Math.max(this.video.currentTime, maxBuffer) / this.video.duration;\n    }\n    else {\n      return 0;\n    }\n  }\n\n  /**\n   * @summary Changes the keypoints\n   * @param {PSV.plugins.VideoPlugin.Keypoint[]} keypoints\n   */\n  setKeypoints(keypoints) {\n    if (keypoints && keypoints.length < 2) {\n      throw new PSVError('At least two points are required');\n    }\n\n    this.autorotate.keypoints = utils.clone(keypoints);\n\n    if (this.autorotate.keypoints) {\n      this.autorotate.keypoints.forEach((pt, i) => {\n        if (pt.position) {\n          const position = this.psv.dataHelper.cleanPosition(pt.position);\n          pt.position = [position.longitude, position.latitude];\n        }\n        else {\n          throw new PSVError(`Keypoint #${i} is missing marker or position`);\n        }\n\n        if (utils.isNil(pt.time)) {\n          throw new PSVError(`Keypoint #${i} is missing time`);\n        }\n      });\n\n      this.autorotate.keypoints.sort((a, b) => a.time - b.time);\n    }\n\n    this.__configureAutorotate();\n  }\n\n  /**\n   * @private\n   */\n  __configureAutorotate() {\n    delete this.autorotate.curve;\n    delete this.autorotate.start;\n    delete this.autorotate.end;\n\n    if (this.psv.isAutorotateEnabled() && this.autorotate.keypoints) {\n      // cancel core rotation\n      this.psv.dynamics.position.stop();\n    }\n  }\n\n  /**\n   * @private\n   */\n  __autorotate() {\n    if (!this.psv.isAutorotateEnabled() || !this.autorotate.keypoints) {\n      return;\n    }\n\n    const currentTime = this.getTime();\n    const autorotate = this.autorotate;\n\n    if (!autorotate.curve || currentTime < autorotate.start.time || currentTime >= autorotate.end.time) {\n      this.__autorotateNext(currentTime);\n    }\n\n    if (autorotate.start === autorotate.end) {\n      this.psv.rotate({\n        longitude: autorotate.start.position[0],\n        latitude : autorotate.start.position[1],\n      });\n    }\n    else {\n      const progress = (currentTime - autorotate.start.time) / (autorotate.end.time - autorotate.start.time);\n      // only the middle segment contains the current section\n      const pt = autorotate.curve.getPoint(1 / 3 + progress / 3);\n\n      this.psv.dynamics.position.goto({\n        longitude: pt.x,\n        latitude : pt.y,\n      });\n    }\n  }\n\n  /**\n   * @private\n   */\n  __autorotateNext(currentTime) {\n    let k1 = null;\n    let k2 = null;\n\n    const keypoints = this.autorotate.keypoints;\n    const l = keypoints.length - 1;\n\n    if (currentTime < keypoints[0].time) {\n      k1 = 0;\n      k2 = 0;\n    }\n    for (let i = 0; i < l; i++) {\n      if (currentTime >= keypoints[i].time && currentTime < keypoints[i + 1].time) {\n        k1 = i;\n        k2 = i + 1;\n        break;\n      }\n    }\n    if (currentTime >= keypoints[l].time) {\n      k1 = l;\n      k2 = l;\n    }\n\n    // get the 4 points necessary to compute the current movement\n    // one point before and two points after the current\n    const workPoints = [\n      keypoints[Math.max(0, k1 - 1)].position,\n      keypoints[k1].position,\n      keypoints[k2].position,\n      keypoints[Math.min(l, k2 + 1)].position,\n    ];\n\n    // apply offsets to avoid crossing the origin\n    const workVectors = [new Vector2(workPoints[0][0], workPoints[0][1])];\n\n    let k = 0;\n    for (let i = 1; i <= 3; i++) {\n      const d = workPoints[i - 1][0] - workPoints[i][0];\n      if (d > Math.PI) { // crossed the origin left to right\n        k += 1;\n      }\n      else if (d < -Math.PI) { // crossed the origin right to left\n        k -= 1;\n      }\n      if (k !== 0 && i === 1) {\n        // do not modify first point, apply the reverse offset the the previous point instead\n        workVectors[0].x -= k * 2 * Math.PI;\n        k = 0;\n      }\n      workVectors.push(new Vector2(workPoints[i][0] + k * 2 * Math.PI, workPoints[i][1]));\n    }\n\n    this.autorotate.curve = new SplineCurve(workVectors);\n    this.autorotate.start = keypoints[k1];\n    this.autorotate.end = keypoints[k2];\n\n    // debugCurve(this.markers, this.autorotate.curve.getPoints(16 * 3).map(p => ([p.x, p.y])), 16);\n  }\n\n}\n"],"names":["EVENTS","PLAY","PAUSE","VOLUME_CHANGE","PROGRESS","BUFFER","PauseOverlay","plugin","psv","button","document","createElement","className","innerHTML","playIcon","container","appendChild","on","CONSTANTS","PANORAMA_LOADED","addEventListener","destroy","off","handleEvent","e","type","utils","toggleClass","isPlaying","playPause","AbstractComponent","PlayPauseButton","navbar","getPlugin","isSupported","toggleActive","onClick","AbstractButton","id","groupId","icon","iconActive","pauseIcon","formatTime","time","seconds","Math","round","minutes","slice","ProgressBar","bufferElt","progressElt","handleElt","slider","Slider","direction","HORIZONTAL","onUpdate","__onSliderUpdate","prop","req","window","requestAnimationFrame","__updateProgress","hide","tooltip","cancelAnimationFrame","style","width","getBufferProgress","getProgress","mouseover","display","left","value","getDuration","create","top","cursor","clientY","clientX","content","move","click","setProgress","TimeCaption","getTime","VolumeButton","rangeContainer","range","trackElt","VERTICAL","__setVolume","getVolume","setMute","mousedown","setVolume","volume","level","bottom","height","volumeIcon","DEFAULTS","lang","registerButton","unshift","VideoPlugin","options","adapter","constructor","includes","PSVError","autorotate","curve","start","end","keypoints","config","progressbar","bigbutton","overlay","markers","init","setKeypoints","AUTOROTATE","BEFORE_RENDER","KEY_PRESS","__autorotate","__configureAutorotate","__bindVideo","args","show","__onKeyPress","trigger","duration","progress","textureData","video","texture","image","key","KEY_CODES","Space","preventDefault","currentTime","paused","muted","play","pause","mute","undefined","setTime","maxBuffer","buffer","buffered","i","l","length","max","clone","forEach","pt","position","dataHelper","cleanPosition","longitude","latitude","isNil","sort","a","b","isAutorotateEnabled","dynamics","stop","__autorotateNext","rotate","getPoint","goto","x","y","k1","k2","workPoints","min","workVectors","Vector2","k","d","PI","push","SplineCurve","AbstractPlugin"],"mappings":"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"}